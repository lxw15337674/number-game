# 数字找茬：RPG 进化版设计文档 (v5.0 - 优化版)

## 1. 核心机制 (Core Mechanics)

### 1.1 时间接力 (Time Relay)
游戏采用 **全局倒计时** 机制。
*   **关卡结构**: **每关包含 3 个回合 (Rounds)**。玩家需在当前关卡内完成 3 次目标寻找才算通关。
*   **初始时间**: 60秒（可通过永久升级提升）。
*   **通关奖励**: 完成一关（3回合） +10秒。
*   **错误惩罚**: -5秒。
*   **失败**: 时间归零 -> 结算 -> 进度重置 。

### 1.2 连击系统 (Combo System)
*   **机制**: 记录玩家**连续成功点击**选项的次数。
*   **重置**: 任何一次点击错误，连击数立即**重置为 0**。
*   **奖励阈值**:
    - 10连击: 金币获取 +x%
    - 20连击: 金币获取 +x%
    - 30连击: 金币获取 +x%，特效强化
    - 50连击+: 金币获取 +x%，全屏特效

### 1.3 局内成长 (Perks) - Roguelike 元素
每击败 **Boss** 后（每 5 关），触发 **"命运三选一"**。
#### 永久升级 (Permanent Upgrades)
*   **贪婪之手**: 关卡金币奖励 +x%。
*   **时间大师**: 初始时间 +x 秒。
*   **护盾**: 每关抵挡一次错误点击的惩罚。
*   **完美奖励**: 每关没有点击错误，则额外增加 +x 秒时间。
*   **连胜加成**: 每关没有点击错误，关卡金币奖励 +x%。
*   **视觉辅助**: 以后每关隐藏 x 个错误选项。

#### 临时强化 (Temporary Perks)
 1. 连续三局没有点击错误，增加 +x 秒时间。
 2. 连续三局没有点击错误，关卡金币奖励 +x%。
 3. 抵挡 x 次错误点击惩罚。
 4. 下一关隐藏 x 个错误选项。
 5. 给 x 金币。
   
### 1.4 Boss 挑战 (Boss Battles)
每 **5** 关遭遇一次 Boss 战（第 5, 10, 15... 关）。
*   **Boss 特殊机制** - 基于规则的难度提升：
| 规则类型 | 普通关卡 | Boss 挑战（连续3次） |
|----------|----------|---------------------|
| **找数字** | 找 1 个最大/最小数 | 按顺序找出**前 3 大**（或前 3 小）的数 |
| **算式挑战** | 找 1 个式子 = 目标值 | 连续找 **3 次**式子 = 目标值（每次新题） |
| **记忆挑战** | 记住 3 个数字 | 记住 **5 个数字** |
| **排序题** | 排序 3 个数 | 排序 **5 个数** |
| **逆向思维** | 找第 2 大/第 2 小 | 依次找**第 2、第 3、第 4 大/小**的数 |

*   **奖励**: 进入 Perk 选择环节。


## 2. 关卡系统 (Level System)

### 2.1 章节与主题 (Biomes)
为了减少视觉疲劳，每 5 关切换一个视觉主题。
*   **L1-5 (赛博空间)**: 霓虹蓝/黑背景，规则：找最大/最小数字。
*   **L6-10 (机械工厂)**: 黄铜/锈色背景，规则：找算式结果。
*   **L11-15 (记忆迷宫)**: 紫/粉背景，规则：记忆挑战。
*   **L16-20 (排序工坊)**: 绿/蓝背景，规则：排序与配对。
*   **L21+ (无尽虚空)**: 紫色/星空背景，规则：随机混合所有规则。

### 2.2 关卡规则类型 (Level Rules)

#### **规则 1: 找数字 (Find Number)**
*   找出最大/最小的数字。
*   难度：数值范围、网格密度。

#### **规则 2: 算式挑战 (Math Challenge)**
*   找出计算结果等于目标值的算式。
*   难度：运算符复杂度（+, -, ×, ÷）。

#### **规则 3: 记忆挑战 (Memory Test)**
*   数字闪烁 3 秒后消失，凭记忆点击指定数字。
*   难度：闪烁时间、数字数量。

#### **规则 4: 排序题 (Sequence Order)**
*   按从小到大（或从大到小）的顺序，依次点击指定数量的数字。
*   难度：需要排序的数字数量（3-5个）。

#### **规则 5: 逆向思维 (Inverse Logic)**
*   找出第二大/第二小的数字，或倒数第 N 个。
*   难度：需要理解的逻辑层级。


### 2.3 难度控制 (Difficulty Scaling)
*   **混合结构**: Phase 1 (1-20) 固定配置 -> Phase 2 (21+) 算法生成。
*   **维度**: 
    *   网格密度: 3x3 -> 3x4 -> 4x4 -> 4x5 -> 5x5 -> 5x6 -> 6x6 
    *   数值范围: 1-50 -> 1-99 -> 1-199 -> 1-999。


## 3. UI 流程 (UI Flow)

1.  **Main Menu**: [开始] [强化] [商店]。
2.  **Game Loop**:
    *   **Game Scene**: 
        *   全局倒计时显示。
        *   关卡数、金币、连击数。
        *   规则提示（顶部）。
    *   **Boss Encounter**: 
        *   Boss 血条显示（3 阶段）。
        *   Boss 难度提示（显示当前挑战目标）。
    *   **Perk Selection**: 弹窗三选一，展示 Perk 效果说明。
3.  **Result**: 结算面板（总关卡数、获得金币、最长连击）。


[商店、金币]先不实现。